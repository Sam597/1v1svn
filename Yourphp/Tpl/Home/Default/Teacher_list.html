<style>
    .kmchange dl{ clear:both; padding:5px 0 5px 2px; overflow:hidden;zoom:1;}
    .kmchange dl dt{ display:block; line-height:30px; height:30px;  font-size:12px; color:#666;width:38px;float:left;  } 
    .kmchange dl dd a{ line-height:24px;padding:0 5px;height:25px; line-height:25px; text-align:center; word-break:keep-all; float:left; display:inline; margin:4px 10px 0 0; color:#666;}
    .kmchange dl dd a:hover{ color:#FFF; background:#FF8200;text-decoration:underline;}
    .kmchange dl dd .kmac{ color:#FFF; background:#FF8200;}
    .hoverred *{color: #25A8FB;}
</style>
<YP:list order="listorder desc" sql="SELECT * FROM tbl_ad where postion=4 and  siteid=$mysiteid  order by listorder desc  limit 1">
    <div class="banner"><a href="{$r.jumpurl}"><img src="{$r.adpic}" data-pinit="registered"></a></div>
</YP:list>
<div class="weizhi">
    <span class="fl"><span>{:L(catpos)} <a href="{:URL()}">{:L(home_font)}</a> &gt <YP:catpos  catid="catid" space=" > " /></span></span>
    <span class="fr" >
        <form method="get" action="/Search/index">
            <input type="text" name="search" class="search" placeholder="请输入搜索信息" value="" />
            <input type="submit" class="search_btn" value="" />
        </form>
    </span>
</div>
<div class="xyxq">
    <div class="ms_left">
        <div class="kmchange"  id="filter">
            <dl>
                <dt>年级：</dt>
                <dd>
                    <a id="g0" data-id="0" data-parma="grade" href="#" >不限</a>
                    <a id="g3" href="#" data-id="3" data-parma="grade" >高中</a>
                    <a id="g2" href="#" data-id="2" data-parma="grade" >初中</a>
                    <a id="g1" href="#" data-id="1" data-parma="grade" >小学</a>
                </dd>
            </dl>
            <dl>
                <dt>科目：</dt>
                <dd>
                    <a id="c0" data-id="0" data-parma="course" href="#" >不限</a>
                    <a id="c1" href="#" data-id="1"  data-parma="course" >数学</a>
                    <a id="c2" href="#" data-id="2"  data-parma="course" >语文</a>
                    <a id="c3" href="#" data-id="3"  data-parma="course" >英语</a>
                    <?php if(1!=$_GET['grade']){
                    ?>
                    <a id="c4" href="#" data-id="4"  data-parma="course" >物理</a>
                    <a id="c5" href="#" data-id="5"  data-parma="course" >化学</a>
                    <?php if(2!=$_GET['grade']){
                    ?>
                    <a id="c6" href="#" data-id="6"  data-parma="course" >生物</a>
                    <a id="c7" href="#" data-id="7"  data-parma="course" >政治</a>
                    <a id="c8" href="#" data-id="8"  data-parma="course" >地理</a>
                    <a id="c9" href="#" data-id="9"  data-parma="course" >历史</a>
                    <?php
                    }
                    ?>
                    <?php
                    }
                    ?>

                </dd>
            </dl>

     <!--       <dl>
                <dt>性别：</dt>
                <dd>
                    <a id="x0" data-id="0" data-parma="sex" href="#" >不限</a>
                    <a id="x1" data-id="1" data-parma="sex" href="#" >男</a>
                    <a id="x2" data-id="2" data-parma="sex" href="#" >女</a>
                </dd>
            </dl>
            <dl>
                <dt>区域：</dt>
                <dd>
                    <a id="a0" data-id="0" data-parma="area" href="#" >不限</a>
                <YP:list order="listorder desc" sql="SELECT * FROM tbl_site where siteid=$mysiteid and level=2">
                    <a id="a{$r.id}" href="#" data-id="{$r.id}" data-parma="area" >{$r.name}</a>
                </YP:list>
                </dd>
            </dl>
            <dl>
                <dt>校区：</dt>
                <dd>
                    <a id="s0" data-id="0" data-parma="school" href="#" >不限</a>
                <YP:list order="listorder desc" sql="SELECT * FROM tbl_site where siteid=$mysiteid and areaid=$area  and level=3 order by listorder desc">
                    <a id="s{$r.id}" href="#" data-id="{$r.id}" data-parma="school" >{$r.name}</a>
                </YP:list>
                </dd>
            </dl>
                         <dl>
                                <dt>层次：</dt>
                                <dd>
                                    <a  id="l0"  data-id="0" data-parma="level"   href="#" >不限</a>
                                <YP:list order="listorder desc" sql="SELECT * FROM tbl_level">
                                    <a id="l{$r.id}" href="#" data-id="{$r.id}" data-parma="level" >{$r.name}</a>
                                </YP:list>
                                </dd>
                            </dl>-->
        </div>
        <h3 class="title23">名师一览</h3>
        <div class="ms">


            <volist name="list" id="r">
                <div class="xyxq">
                    <div class="xy_left2">
                        <div class="xt_picbox2">
                            <a target="_blank"  href="{$r.url}"><img src="{$r.thumb}" height="153" width="204" /></a>
                        </div> 
                    </div>
                    <div class="xy_right">
                        <div class="rw_right">
                            <p class="anli_title3"><a target="_blank"  href="{$r.url}" style="color:#ff6600">{$r.title}</a></p>
                            <p class="p22">年级：{$r.grade_ids|getgrade}  科目：{$r.course_ids|getcourse}</p>
                            <div class="zixu1">
                                <div class="zx_fot1">
                                    <div class="zx_top1">
                                        <div class="p21">
                                            <a target="_blank"  href="{$r.url}">{$r.desc}</a>
                                            <a href="{$r.url}" class="span20">[详细]</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </volist>    


            <div class="page" style="padding-top:20px">
                <!-- <a href="#"><</a><a href="#">1</a><a href="#">2</a><a href="#">></a> -->
                <div id="pages" class="page">{$pages}</div>
            </div>


        </div>
    </div>
    <!--名师left end-->
    <div class="ms_right">
        <h3 class="title24">名师推荐</h3>
        <div class="mstj">
            <YP:list order="listorder desc" sql="SELECT * FROM tbl_teacher where siteid=$mysiteid and posid=3 limit 10">
                <dl>
                    <dt> <a href="{$r.url}" title="{$r.title}" target="_blank">
                        <img src="{$r.thumb}" width="160" height="125"/> </a></dt>
                    <dd><a href="{$r.url}" title="{$r.title}" target="_blank">{$r.title}</a></dd>
                </dl>
            </YP:list>
        </div>
        <!--名师推荐 end-->
        <div class="jxgs">
            <h3 class="title24">教学故事</h3>
            <ul class="ul01">
                <YP:list order="listorder desc" sql="SELECT * FROM tbl_article where siteid=$mysiteid and catid=54 limit 8">
                    <li>
                        <a href="{$r.url}" title="{$r.title}" target="_blank">
                            ·{$r.title|str_cut=###,28}
                        </a>
                    </li>
                </YP:list>
            </ul>
        </div>
    </div>
</div>


<script>
    $('.p21').hover(
    function(){
        $(this).addClass('hoverred')
    },
    function(){
        $(this).removeClass('hoverred')

    }
)
    
    
    $('#g'+{$grade}).addClass('kmac');
    $('#a'+{$area}).addClass('kmac');
    $('#s'+{$school}).addClass('kmac');
    $('#l'+{$level}).addClass('kmac');
    $('#c'+{$course}).addClass('kmac');
    $('#x'+{$sex}).addClass('kmac');
    //    //科目多选
    //    var arrC='{$course}'.split(',');
    //    for(var k in arrC){
    //        $('#c'+arrC[k]).addClass('kmac');
    //    }
    $('#filter a').click(function(){
        var urlStr='',curl=getRequest(),
        id=$(this).data('id').toString(),
        parma=$(this).data('parma');
        //        //处理课程多选
        //        if(parma=='course'){
        //            if(curl['course']){
        //                if(0==id){
        //                    curl['course']=0;
        //                }else{ 
        //                    if(0==curl['course']){
        //                        curl['course']=id;
        //                    }else{
        //                        arrCourse=curl['course'].split(',');
        //                        if('-1'==jQuery.inArray(id, arrCourse)){
        //                            curl['course']=curl['course']+','+id;
        //                        }else{
        //                            arrCourse[jQuery.inArray(id, arrCourse)]=undefined;
        //                            var courseStr='';
        //                            for(var k in arrCourse){
        //                                if(undefined!=arrCourse[k]){
        //                                    courseStr+=arrCourse[k]+',';
        //                                } 
        //                            }
        //                            curl['course']=courseStr.slice(0,-1);
        //                        }       
        //                    }
        //                }
        //            }else{
        //                curl[parma]=id;
        //            }
        //        }else{
        curl[parma]=id;//赋值或修改参数
        //        }
        //选择年纪清空科目
        if('grade'==parma){
            curl['course']=0;
        }
        //选择区域清空校区
        if('area'==parma){
            curl['school']=0;
        }
        //组合url
        for(var key in curl){
            urlStr+=key+'='+curl[key]+'&'; 
        }

        window.location.href='/jiaoshi/?'+urlStr.slice(0,-1);
    })
    
    //获取当前参数并转化数组
    function getRequest()  
    {  
        var url = location.search; //获取url中"?"符后的字串  
        var theRequest = new Array();  
        if(url.indexOf("?") != -1)  
        {  
            var str = url.substr(1);  
            strs = str.split("&");  
            for(var i = 0; i < strs.length; i ++)  
            {  
                theRequest[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);  
            }  
        }  
        return theRequest;  
    }  
</script>
